<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>ğŸ‘» ìœ ë ¹ ìš´ë™íšŒ - ìµœì¢…ë³¸</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body { font-family: 'Arial'; background: #f0f0f0; text-align: center; padding: 20px; }
    h1 { background: #222; color: #fff; padding: 20px; margin: -20px -20px 20px; }
    .container { max-width: 800px; margin: auto; background: #fff; padding: 20px; border-radius: 10px; }
    .track { display: flex; justify-content: start; margin: 8px 0; }
    .cell { width: 30px; height: 30px; border: 1px solid #ccc; background: #eee; margin-right: 2px; }
    .ghost { background-color: #ffd700; font-weight: bold; color: #000; }
    button, select, input { padding: 8px 12px; margin: 5px; font-size: 1rem; }
    .hidden { display: none; }
  </style>
</head>
<body>
  <h1>ğŸ‘» ìœ ë ¹ ìš´ë™íšŒ</h1>
  <div class="container" id="app">ê²Œì„ì„ ì‹œì‘í•˜ì„¸ìš”...</div>
  <script>
    const ghostNames = ["ë“œë¼í˜ë¼", "í”„ë‘ì¼„ìŠˆíƒ€ì¸", "ë‹¬ê±€ê·€ì‹ ", "êµ¬ë¯¸í˜¸", "ì²˜ë…€ê·€ì‹ ", "ëŠ‘ëŒ€ì¸ê°„", "í˜¸ë°•ê·€ì‹ ", "í•´ê³¨"];
    const ghostColors = ["#ff9999","#ffcc99","#ffff99","#ccff99","#99ffff","#99ccff","#cc99ff","#ff99cc"];
    const ghostMoves = {
      "í•´ê³¨": [3,3,2,2,3], "êµ¬ë¯¸í˜¸": [3,2,2,2,3], "ë‹¬ê±€ê·€ì‹ ": [2,2,2,2,3],
      "í˜¸ë°•ê·€ì‹ ": [1,2,2,2,3], "ë“œë¼í˜ë¼": [2,2,1,2,2], "ëŠ‘ëŒ€ì¸ê°„": [1,1,2,2,2],
      "ì²˜ë…€ê·€ì‹ ": [2,1,1,1,2], "í”„ë‘ì¼„ìŠˆíƒ€ì¸": [1,1,1,1,2]
    };
    const allHints = [
      "êµ¬ë¯¸í˜¸ëŠ” í•´ê³¨ë³´ë‹¤ ëŠë¦¬ê²Œ ë„ì°©í–ˆë‹¤.","í”„ë‘ì¼„ìŠˆíƒ€ì¸ì€ 7ë“±ë³´ë‹¤ë„ ëŠ¦ì—ˆë‹¤.","ë‹¬ê±€ê·€ì‹ ì€ ë“œë¼í˜ë¼ë³´ë‹¤ ì•ì„œ ë„ì°©í–ˆë‹¤.",
      "í˜¸ë°•ê·€ì‹ ì€ ì¤‘ìœ„ê¶Œì´ë‹¤.","ëŠ‘ëŒ€ì¸ê°„ì€ ë‹¬ê±€ê·€ì‹ ë³´ë‹¤ ë’¤ì— ìˆë‹¤.","í•´ê³¨ì€ ë‹¨ í•œ ë²ˆë„ 0ì¹¸ ì´ë™ì„ í•˜ì§€ ì•Šì•˜ë‹¤.",
      "ë“œë¼í˜ë¼ëŠ” í˜¸ë°•ê·€ì‹ ë³´ë‹¤ ë’¤ì—ì„œ ê³¨ì¸í–ˆë‹¤.","ì²˜ë…€ê·€ì‹ ì€ í•˜ìœ„ê¶Œì´ë‹¤.","í”„ë‘ì¼„ìŠˆíƒ€ì¸ì€ í•´ê³¨ê³¼ ê°™ì€ ì¹¸ì— ë„ë‹¬í•˜ì§€ ëª»í–ˆë‹¤.",
      "í•´ê³¨ì€ 5ë¼ìš´ë“œ ë‚´ë‚´ ê°€ì¥ ë¹ ë¥´ê²Œ ì´ë™í–ˆë‹¤.","êµ¬ë¯¸í˜¸ëŠ” 1ë“±ì´ ì•„ë‹ˆì—ˆë‹¤.","ë‹¬ê±€ê·€ì‹ ì€ 3ë“±ì´ë‹¤.",
      "ë“œë¼í˜ë¼ëŠ” ì¤‘ìœ„ê¶Œì´ë‹¤.","í”„ë‘ì¼„ìŠˆíƒ€ì¸ì€ ë§¤ ë¼ìš´ë“œ ëª¨ë‘ 1ì¹¸ ì´í•˜ë¡œë§Œ ì›€ì§ì˜€ë‹¤.","ëŠ‘ëŒ€ì¸ê°„ì€ 6ë“±ì´ë‹¤.","ì²˜ë…€ê·€ì‹ ì€ ë“œë¼í˜ë¼ë³´ë‹¤ ëŠë¦¬ë‹¤."
    ];
    let round = 0;
    let positions = {};
    let teams = [];
    let revealed = new Set();

    function init() {
      document.getElementById("app").innerHTML = `<h2>íŒ€ ìˆ˜ë¥¼ ì„ íƒí•˜ì„¸ìš”</h2>
        <select id="teamCount">${[2,3,4,5,6,7,8].map(n => `<option value="${n}">${n}íŒ€</option>`).join("")}</select><br>
        <button onclick="inputTeamNames()">ë‹¤ìŒ</button>`;
    }

    function inputTeamNames() {
      const count = parseInt(document.getElementById("teamCount").value);
      let html = `<h2>íŒ€ ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”</h2>`;
      for (let i = 0; i < count; i++) {
        html += `íŒ€ ${i+1}: <input id="team${i}" /><br>`;
      }
      html += `<button onclick="selectHints(${count})">íŒíŠ¸ ì„ íƒìœ¼ë¡œ</button>`;
      document.getElementById("app").innerHTML = html;
    }

    function selectHints(count) {
      teams = [];
      for (let i = 0; i < count; i++) {
        const name = document.getElementById("team" + i).value.trim();
        if (!name) return alert("íŒ€ ì´ë¦„ì„ ëª¨ë‘ ì…ë ¥í•´ì£¼ì„¸ìš”.");
        teams.push({ name, hints: [] });
      }
      let html = `<h2>íŒ€ë³„ íŒíŠ¸ë¥¼ ì„ íƒí•˜ì„¸ìš”</h2>`;
      teams.forEach((team, idx) => {
        html += `<h3>${team.name}</h3>`;
        allHints.forEach((h, i) => {
          html += `<label><input type="checkbox" name="hint${idx}" value="${i}" onchange="limitHints(${idx}, ${count<=3?2:1})"> íŒíŠ¸ ${i+1}</label><br>`;
        });
      });
      html += `<button onclick="startRace()">ê²½ê¸° ì‹œì‘</button>`;
      document.getElementById("app").innerHTML = html;
    }

    function limitHints(idx, max) {
      const checked = document.querySelectorAll(`input[name="hint${idx}"]:checked`);
      if (checked.length > max) event.target.checked = false;
    }

    function startRace() {
      ghostNames.forEach(g => positions[g] = 0);
      teams.forEach((t, i) => {
        t.hints = [...document.querySelectorAll(`input[name="hint${i}"]:checked`)].map(e => allHints[parseInt(e.value)]);
      });
      round = 0;
      showRound();
    }

    function showRound() {
      const app = document.getElementById("app");
      let html = `<h2>ë¼ìš´ë“œ ${round+1}</h2>`;
      ghostNames.forEach((name, idx) => {
        html += `<div class="track">`;
        for (let i = 0; i < 20; i++) {
          html += `<div class="cell ${positions[name]===i?'ghost':''}" style="${positions[name]===i?'background:'+ghostColors[idx]:''}">${positions[name]===i?name[0]:""}</div>`;
        }
        html += `</div>`;
      });
      html += round < 3
        ? `<button onclick="nextRound()">ë‹¤ìŒ ë¼ìš´ë“œ</button>
           <button onclick="showHint()">ë¬´ì‘ìœ„ íŒíŠ¸</button>`
        : `<button onclick="finalPredict()">ìµœì¢… ì˜ˆì¸¡ ì œì¶œ</button>`;
      app.innerHTML = html;
    }

    function nextRound() {
      ghostNames.forEach(g => positions[g] += ghostMoves[g][round]);
      round++;
      showRound();
    }

    function showHint() {
      let index = prompt("ë³´ê³  ì‹¶ì€ íŒíŠ¸ ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš” (1~16):");
      if (!index) return;
      index = parseInt(index);
      if (isNaN(index) || index < 1 || index > allHints.length) {
        alert("1ë²ˆë¶€í„° 16ë²ˆ ì‚¬ì´ ìˆ«ìë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.");
        return;
      }
      const selected = allHints[index - 1];
      alert("ğŸ’¡ íŒíŠ¸ " + index + ": " + selected);
    }

    function finalPredict() {
      let html = `<h2>ìµœì¢… ìˆœìœ„ ì˜ˆì¸¡</h2>`;
      teams.forEach((t, i) => {
        html += `<h3>${t.name}</h3>`;
        for (let j = 0; j < 8; j++) {
          html += `${j+1}ìœ„: <select id="p${i}_${j}">${ghostNames.map(g=>`<option>${g}</option>`)}</select><br>`;
        }
      });
      html += `<button onclick="grade()">ì œì¶œ</button>`;
      document.getElementById("app").innerHTML = html;
    }

    function grade() {
      const finalRank = Object.entries(positions).sort((a,b)=>b[1]-a[1]).map(x=>x[0]);
      let html = `<h2>ğŸ ìµœì¢… ê²°ê³¼</h2><ol>${finalRank.map(g=>`<li>${g}</li>`).join("")}</ol>`;
      teams.forEach((t,i) => {
        let score = 0;
        for (let j = 0; j < 8; j++) {
          const v = document.getElementById(`p${i}_${j}`).value;
          if (v === finalRank[j]) score++;
        }
        html += `<p><strong>${t.name}</strong>: ${score}ì </p>`;
      });
      document.getElementById("app").innerHTML = html;
    }

    window.onload = init;
  </script>
</body>
</html>
